{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@clarkwinkelmann/money-rewards/webpack/bootstrap","webpack://@clarkwinkelmann/money-rewards/webpack/runtime/compat get default export","webpack://@clarkwinkelmann/money-rewards/webpack/runtime/define property getters","webpack://@clarkwinkelmann/money-rewards/webpack/runtime/hasOwnProperty shorthand","webpack://@clarkwinkelmann/money-rewards/webpack/runtime/make namespace object","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/extend']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['forum/app']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/components/Button']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/Model']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/models/Post']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['forum/utils/PostControls']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@clarkwinkelmann/money-rewards/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@clarkwinkelmann/money-rewards/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@clarkwinkelmann/money-rewards/./src/forum/models/Reward.ts","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/Component']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/components/Link']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@clarkwinkelmann/money-rewards/./src/forum/components/FormattedMoney.ts","webpack://@clarkwinkelmann/money-rewards/./src/forum/components/RewardRecord.ts","webpack://@clarkwinkelmann/money-rewards/./src/forum/components/RewardHistoryPage.ts","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@clarkwinkelmann/money-rewards/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@clarkwinkelmann/money-rewards/./src/forum/components/RewardModal.ts","webpack://@clarkwinkelmann/money-rewards/./src/forum/components/PostRewards.ts","webpack://@clarkwinkelmann/money-rewards/./src/forum/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/PostControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import Model from 'flarum/common/Model';\nimport User from 'flarum/common/models/User';\n\nexport default class Reward extends Model {\n    amount = Model.attribute('amount')\n    newMoney = Model.attribute('newMoney')\n    comment = Model.attribute('comment')\n    createdAt = Model.attribute('createdAt', Model.transformDate)\n    post = Model.hasOne('post')\n    giver = Model.hasOne<User>('giver')\n    receiver = Model.hasOne<User>('receiver')\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","import app from 'flarum/forum/app';\nimport Component, {ComponentAttrs} from 'flarum/common/Component';\n\ninterface MoneyFormatAttrs extends ComponentAttrs {\n    money: number\n}\n\nexport default class FormattedMoney extends Component<MoneyFormatAttrs> {\n    view() {\n        const moneyName = app.forum.attribute<string>('antoinefr-money.moneyname') || '[money]';\n\n        return m('span', moneyName.replace('[money]', this.attrs.money + ''));\n    }\n}\n","import app from 'flarum/forum/app';\nimport Component, {ComponentAttrs} from 'flarum/common/Component';\nimport Link from 'flarum/common/components/Link';\nimport avatar from 'flarum/common/helpers/avatar';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport icon from 'flarum/common/helpers/icon';\nimport username from 'flarum/common/helpers/username';\nimport Reward from '../models/Reward';\nimport FormattedMoney from './FormattedMoney';\n\ninterface RewardRecordAttrs extends ComponentAttrs {\n    reward: Reward\n    showReceiver?: boolean\n}\n\nexport default class RewardRecord extends Component<RewardRecordAttrs> {\n    view() {\n        const {reward, showReceiver} = this.attrs;\n\n        const giver = reward.giver() || null;\n        const receiver = reward.receiver() || null;\n        const post = reward.post();\n\n        const giverContent = [\n            avatar(giver),\n            username(giver),\n        ];\n\n        const receiverContent = [\n            avatar(receiver),\n            username(receiver),\n        ];\n\n        const comment = reward.comment();\n\n        return m('li.MoneyRewardRecord', [\n            m('span.MoneyRewardRecordIcon', icon('fas fa-gift')),\n            m('span.MoneyRewardRecordDate', humanTime(reward.createdAt()!)),\n            m('span.MoneyRewardRecordAmount', FormattedMoney.component({\n                money: reward.amount(),\n            })),\n            m('span.MoneyRewardRecordGiver', [\n                ' ',\n                app.translator.trans('clarkwinkelmann-money-rewards.forum.record.from'),\n                ' ',\n                giver ? Link.component({\n                    className: 'MoneyRewardRecordUser',\n                    href: app.route.user(giver),\n                }, giverContent) : m('span.MoneyRewardRecordUser', giverContent),\n            ]),\n            showReceiver ? m('span.MoneyRewardRecordReceiver', [\n                ' ',\n                app.translator.trans('clarkwinkelmann-money-rewards.forum.record.to'),\n                ' ',\n                receiver ? Link.component({\n                    className: 'MoneyRewardRecordUser',\n                    href: app.route.user(receiver),\n                }, receiverContent) : m('span.MoneyRewardRecordUser', receiverContent),\n            ]) : null,\n            showReceiver && post ? m('span.MoneyRewardRecordPost', [\n                ' ',\n                app.translator.trans('clarkwinkelmann-money-rewards.forum.record.post', {\n                    number: post.number(),\n                    title: post.discussion()?.title() || 'N/A',\n                    a: Link.component({\n                        href: app.route.post(post),\n                    }),\n                }),\n            ]) : null,\n            comment ? m('.MoneyRewardRecordComment', [\n                m('span.MoneyRewardRecordCommentLabel', app.translator.trans('clarkwinkelmann-money-rewards.forum.record.comment')),\n                ' ',\n                m('span.MoneyRewardRecordCommentContent', reward.comment()),\n            ]) : null,\n        ]);\n    }\n}\n","import app from 'flarum/forum/app';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport extractText from 'flarum/common/utils/extractText';\nimport {ApiPayloadPlural} from 'flarum/common/Store';\nimport Reward from '../models/Reward';\nimport RewardRecord from './RewardRecord';\n\nexport default class RewardHistoryPage extends UserPage {\n    loading: boolean = true\n    rewards: Reward[] = []\n\n    oninit(vnode: any) {\n        super.oninit(vnode);\n\n        this.loadUser(m.route.param('username'));\n    }\n\n    show(user: any) {\n        super.show(user);\n\n        app.setTitle(extractText(app.translator.trans('clarkwinkelmann-money-rewards.forum.profile.title')));\n\n        this.loadRewards();\n    }\n\n    loadRewards() {\n        app.request<ApiPayloadPlural>({\n            method: 'GET',\n            url: app.forum.attribute('apiUrl') + '/users/' + this.user!.id() + '/money-rewards',\n        }).then(payload => {\n            this.rewards = app.store.pushPayload<Reward[]>(payload);\n            this.loading = false;\n            m.redraw();\n        });\n    }\n\n    content() {\n        if (this.loading) {\n            return LoadingIndicator.component();\n        }\n\n        return m('ul.MoneyRewardHistoryPage.MoneyRewardRecords', [\n            this.rewards.map(reward => RewardRecord.component({reward, showReceiver: true})),\n        ]);\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","import app from 'flarum/forum/app';\nimport Modal, {IInternalModalAttrs} from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Switch from 'flarum/common/components/Switch';\nimport {ApiPayloadSingle} from 'flarum/common/Store';\nimport Post from 'flarum/common/models/Post';\nimport FormattedMoney from './FormattedMoney';\n\ninterface RewardModalAttrs extends IInternalModalAttrs {\n    post: Post\n}\n\nexport default class RewardModal extends Modal<RewardModalAttrs> {\n    preselectAmount: number = 0\n    customAmount: boolean = false\n    customAmountValue: string = ''\n    createMoney: boolean = false\n    comment: string = ''\n\n    oninit(vnode: any) {\n        super.oninit(vnode);\n\n        if ((app.forum.attribute<string[]>('moneyRewardsPreselection') || []).length === 0) {\n            this.customAmount = true;\n        }\n    }\n\n    className() {\n        return 'Modal--small';\n    }\n\n    title() {\n        return app.translator.trans('clarkwinkelmann-money-rewards.forum.modal.title');\n    }\n\n    content() {\n        const preselection = app.forum.attribute<string[]>('moneyRewardsPreselection') || [];\n\n        return m('.Modal-body', [\n            m('.Form-group', [\n                app.translator.trans('clarkwinkelmann-money-rewards.forum.modal.target', {\n                    number: this.attrs.post.number(),\n                    user: this.attrs.post.user(),\n                }),\n            ]),\n            preselection.length > 0 ? m('.Form-group', [\n                preselection.map((amount, index) => {\n                    return m('label', [\n                        m('input', {\n                            type: 'radio',\n                            name: 'money-reward-preselection',\n                            checked: this.preselectAmount === index && !this.customAmount,\n                            onchange: () => {\n                                this.preselectAmount = index;\n                                this.customAmount = false;\n                            },\n                        }),\n                        ' ',\n                        FormattedMoney.component({\n                            money: amount,\n                        }),\n                    ]);\n                }),\n                app.forum.attribute('moneyRewardsCustomAmounts') ? m('label', [\n                    m('input', {\n                        type: 'radio',\n                        name: 'money-reward-preselection',\n                        checked: this.customAmount,\n                        onchange: () => {\n                            this.customAmount = true;\n                        },\n                    }),\n                    ' ',\n                    app.translator.trans('clarkwinkelmann-money-rewards.forum.modal.optionCustom'),\n                ]) : null,\n            ]) : null,\n            this.customAmount ? m('.Form-group', [\n                m('label', app.translator.trans('clarkwinkelmann-money-rewards.forum.modal.label.custom')),\n                m('input.FormControl', {\n                    type: 'number',\n                    value: this.customAmountValue,\n                    onchange: (event: InputEvent) => {\n                        this.customAmountValue = (event.target as HTMLInputElement).value;\n                    },\n                    min: app.forum.attribute('moneyRewardsCustomAmountsMin'),\n                    max: app.forum.attribute('moneyRewardsCustomAmountsMax') || undefined,\n                    step: 1 / Math.pow(10, app.forum.attribute('moneyRewardsCustomAmountsDecimals')),\n                }),\n            ]) : '',\n            m('.Form-group', [\n                app.translator.trans('clarkwinkelmann-money-rewards.forum.modal.balance', {\n                    amount: FormattedMoney.component({\n                        money: app.session.user!.attribute('money'),\n                    })\n                }),\n            ]),\n            app.forum.attribute('moneyRewardsCreateMoney') ? m('.Form-group', [\n                Switch.component({\n                    state: this.createMoney,\n                    onchange: (value: boolean) => {\n                        this.createMoney = value;\n                    },\n                }, app.translator.trans('clarkwinkelmann-money-rewards.forum.modal.label.create')),\n            ]) : null,\n            m('.Form-group', [\n                m('label', app.translator.trans('clarkwinkelmann-money-rewards.forum.modal.label.comment')),\n                m('textarea.FormControl', {\n                    value: this.comment,\n                    onchange: (event: InputEvent) => {\n                        this.comment = (event.target as HTMLInputElement).value;\n                    },\n                }),\n            ]),\n            m('.Form-group', Button.component({\n                type: 'submit',\n                className: 'Button Button--primary',\n                loading: this.loading,\n            }, app.translator.trans('clarkwinkelmann-money-rewards.forum.modal.submit'))),\n        ]);\n    }\n\n    onsubmit(event: Event) {\n        event.preventDefault();\n\n        this.loading = true;\n\n        app.request<ApiPayloadSingle>({\n            method: 'POST',\n            url: app.forum.attribute('apiUrl') + '/posts/' + this.attrs.post.id() + '/money-rewards',\n            errorHandler: this.onerror.bind(this),\n            body: {\n                data: {\n                    attributes: {\n                        amount: this.customAmount ? this.customAmountValue : app.forum.attribute<string[]>('moneyRewardsPreselection')[this.preselectAmount],\n                        createMoney: this.createMoney,\n                        comment: this.comment,\n                    },\n                },\n            },\n        })\n            .then(payload => {\n                app.store.pushPayload(payload);\n\n                this.hide();\n\n                app.alerts.show({type: 'success'}, app.translator.trans('clarkwinkelmann-money-rewards.forum.modal.success'));\n            })\n            .catch(() => {\n                this.loading = false;\n                m.redraw();\n            });\n    }\n}\n","import app from 'flarum/forum/app';\nimport Component, {ComponentAttrs} from 'flarum/common/Component';\nimport Post from 'flarum/common/models/Post';\nimport Reward from '../models/Reward';\nimport RewardRecord from './RewardRecord';\n\ninterface PostRewardsAttrs extends ComponentAttrs {\n    post: Post\n}\n\nexport default class PostRewards extends Component<PostRewardsAttrs> {\n    view() {\n        // @ts-ignore\n        const rewards: Reward[] = this.attrs.post.moneyRewards();\n\n        if (!Array.isArray(rewards) || rewards.length === 0) {\n            return null;\n        }\n\n        return m('.PostMoneyRewards', [\n            m('h4', app.translator.trans('clarkwinkelmann-money-rewards.forum.post.section')),\n            m('ul.MoneyRewardRecords', rewards.map(reward => RewardRecord.component({reward}))),\n        ]);\n    }\n}\n","import {extend} from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport Button from 'flarum/common/components/Button';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport Model from 'flarum/common/Model';\nimport Post from 'flarum/common/models/Post';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport extractText from 'flarum/common/utils/extractText';\nimport Reward from './models/Reward';\nimport RewardHistoryPage from './components/RewardHistoryPage';\nimport RewardModal from './components/RewardModal';\nimport PostRewards from './components/PostRewards';\n\napp.initializers.add('clarkwinkelmann-money-rewards', () => {\n    app.routes.userMoneyRewardHistory = {\n        path: '/u/:username/rewards',\n        component: RewardHistoryPage,\n    };\n\n    app.store.models['money-rewards'] = Reward;\n\n    // @ts-ignore\n    Post.prototype.moneyRewards = Model.hasMany('moneyRewards');\n\n    extend(UserPage.prototype, 'navItems', function (items) {\n        if (!this.user || !this.user.attribute('canSeeMoneyRewardHistory')) {\n            return;\n        }\n\n        items.add('money-rewards', LinkButton.component({\n            href: app.route('userMoneyRewardHistory', {\n                username: this.user.slug(),\n            }),\n            icon: 'fas fa-money-bill',\n        }, app.translator.trans('clarkwinkelmann-money-rewards.forum.profile.nav')));\n    });\n\n    extend(PostControls, 'userControls', function (items, post: Post) {\n        if (!post.attribute('rewardWithMoney')) {\n            if (post.attribute('contentType') === 'comment' && app.session.user) {\n                items.add('money-reward', Button.component({\n                    icon: 'fas fa-gift',\n                    className: 'disabled', // Setting just the class so you can still actually click the button\n                    onclick: () => {\n                        alert(extractText(app.translator.trans('clarkwinkelmann-money-rewards.forum.post.disallowed' + (post.user() === app.session.user ? 'Own' : 'Other'))));\n                    },\n                }, app.translator.trans('clarkwinkelmann-money-rewards.forum.post.action')));\n            }\n\n            return;\n        }\n\n        items.add('money-reward', Button.component({\n            onclick: () => {\n                app.modal.show(RewardModal, {\n                    post,\n                });\n            },\n            icon: 'fas fa-gift',\n        }, app.translator.trans('clarkwinkelmann-money-rewards.forum.post.action')));\n    });\n\n    extend(CommentPost.prototype, 'content', function (content) {\n        content.push(PostRewards.component({\n            post: this.attrs.post,\n        }));\n    });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","Reward","amount","Model","newMoney","comment","createdAt","post","giver","receiver","FormattedMoney","view","moneyName","app","m","replace","this","attrs","money","Component","RewardRecord","reward","showReceiver","giverContent","avatar","username","receiverContent","icon","humanTime","component","Link","className","href","number","title","discussion","RewardHistoryPage","loading","rewards","oninit","vnode","loadUser","route","param","show","user","extractText","loadRewards","method","url","id","then","payload","redraw","content","LoadingIndicator","map","UserPage","RewardModal","preselectAmount","customAmount","customAmountValue","createMoney","length","preselection","index","type","name","checked","onchange","event","target","min","max","undefined","step","Math","pow","Switch","state","Button","onsubmit","preventDefault","errorHandler","onerror","body","data","attributes","hide","Modal","PostRewards","moneyRewards","Array","isArray","path","Post","extend","items","attribute","add","LinkButton","slug","PostControls","onclick","alert","CommentPost","push"],"sourceRoot":""}